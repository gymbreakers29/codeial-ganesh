{let e=function(){let e=$("#post-form");e.submit((function(o){o.preventDefault(),$.ajax({type:"post",url:"/posts/create-post",data:e.serialize(),success:function(e){let o=n(e.data.post);$("#post-container").prepend(o),c($(" .delete-post-button",o)),t(e.data.post._id)},error:function(e){console.log(e.responseText)}})}))},t=function(e){let t=$("#comment-form-"+e);t.submit((function(e){e.preventDefault(),$.ajax({type:"post",url:"/comments/create-comment",data:t.serialize(),success:function(e){let t=o(e.data.comment);$("#comments-container-"+e.data.comment.post).prepend(t),console.log(e.data.comment._id),i($(" .delete-comment-button",t),e.data.comment._id)},error:function(e){console.log(e.responseText)}})}))},n=function(e){return $(`<div id="post-${e._id}">\n    <div id="heading">\n        <p>${e.user.name}\n                <a class="delete-post-button" href="/posts/delete/${e._id}">x</a>\n           </p>\n           </div>\n    <div id="post">\n        <p>${e.content}</p></div>\n        \n              <section id="comment-section">\n                  <form action="/comments/create-comment" id="comment-form-${e._id}" class="comment-form-class" method="POST">\n              <textarea name="comment" id="new-comment" cols="30" rows="2"></textarea>\n              <input type="hidden" name="post" value="${e._id}">\n              <input type="submit" >\n              \n                  </form>\n                  <div id="comments-container-${e._id}">\n                  \n                  </div>\n                \n                </section>\n           \n           \n   \n  </div>`)},o=function(e){return $(`\n    <div id="comment-${e._id}">\n    <p>${e.content}\n            <a class="delete-comment-button" href="/comments/delete/${e._id}">x</a>\n        <br>${e.user.name}</p>\n</div>\n   `)},c=function(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$("#post-"+e.data.post_id).remove()},error:function(e){console.log(err.responseText)}})}))},i=function(e,t){$(e).click((function(n){n.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$("#comment-"+t).remove()},error:function(e){console.log(err.responseText)}})}))},s=$(" .delete-comment-button");for(commentdeletelink of s)id=$(commentdeletelink).prop("id"),i(commentdeletelink,id);let r=$(" .delete-post-button");for(deletelink of r)c(deletelink);let m=$(" .postx");for(post of m){let e=$(post).prop("id").split("-")[1];t(e)}e()}